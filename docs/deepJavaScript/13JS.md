---
title: ES7-ES12
date: 2022-02-16
categories:
 - JavaScript
tags:
 - JavaScript
---

<!-- more -->

## ES7 - Array Includes 

**`Array.indexOf()`** <Badge text="ES6" type="warning"/>

```js
const names = ["aaa","bbb","ccc"]

console.log(names.indexOf("aaa")) //0
console.log(names.indexOf("ddd")) //-1
```

**`Array.includes()`** <Badge text="ES7新增" type="tip"/>

```js
const names = ["aaa","bbb","ccc"]


console.log(names.includes("aaa"))//true

//第二个参数，从索引值开始判断
console.log(names.includes("aaa",1))//false

```
::: tip 区别：
与 `indexOf` 相比，可以判断 `NAN`
:::

```js
const names = ["aaa","bbb","ccc", NaN]

console.log(names.indexOf(NaN))
//-1
console.log(names.includes(NaN))
//true

```

## ES7 - 指数运算方法

**`Math.pow()`** <Badge text="ES6" type="warning"/>

```js
const result = Math.pow(3,3) 
console.log(result)//27
```

**`**`** <Badge text="ES7新增" type="tip"/>

```js
const result = 3 ** 3 
console.log(result)//27
``` 

 
## ES8 - Object.values

ES8之前可以通过 `Object.keys` 获取一个对象所有的 key ，在ES8中提供了 `Object.values` 来获取所有的 value 值： 

```js
const obj = {
    name:"okarin",
    age:18
}

console.log(Object.keys(obj))//[ 'name', 'age' ]
console.log(Object.values(obj))//[ 'okarin', 18 ]
```


::: warning 注意：
 `Object.values` 的返回值是一个**数组**，当**传入的是一个数组**时，会**返回数组本身**，当传入的是一个**字符串**时，返回的是一个**包含字符串所有的字符的数组**。
:::

```js
console.log(Object.keys(["abc","cba","nba"]))//[ '0', '1', '2' ]
console.log(Object.values(["abc","cba","nba"]))
//[ 'abc', 'cba', 'nba' ]

console.log(Object.keys("hello"))//[ '0', '1', '2', '3', '4' ]
console.log(Object.values("hello"))//[ 'h', 'e', 'l', 'l', 'o' ]

```

## ES8 - Object.entries

通过 `Object.entries` 可以获取到一个数组，数组中会存放可枚举属性的键值对数组。

```js
const obj = {
    name:"okarin",
    age:18
}

const arr = Object.entries(obj)
console.log(arr)//[ [ 'name', 'okarin' ], [ 'age', 18 ] ]

const arr = Object.entries(obj)
arr.forEach((item) => {
  console.log(item[0],item[1])
})


```
::: tip 其他：
还可以传入其他类型，如数组。
:::


```js
console.log(Object.entries(["abc","cba","nba"]))
//[ [ '0', 'abc' ], [ '1', 'cba' ], [ '2', 'nba' ] ]
```

## ES8 - String Padding

某些字符串我们需要对其进行前后的填充，来实现某种格式化效果，ES8中增加了 `padStart`和 `padEnd` 方法，分别是对字符串的首尾进行填充的。

```js
const message = "Hello world"
const newMessage = message.padStart(15,"*").padEnd(20,"-")
console.log(newMessage)
```

## ES8 - Trailing-Commas

ES8允许在函数定义和调用时多加一个逗号

```js
function foo(m,n,){
   console.log(m + n)
}

foo(10,20,)
```

## ES8 - Object Descriptors

ES8 `Object Descriptors` 获取对象的所有属性描述符

详见之前 [Object.getOwnPropertyDescriptors()](http://okarin.cn/docs/deepJavaScript/06JS.html#%E8%8E%B7%E5%8F%96%E5%B1%9E%E6%80%A7%E6%8F%8F%E8%BF%B0%E7%AC%A6)

## ES8 - Async Function

详见之后



## ES9 - Object Spread syntax

ES9之后可以对对象使用展开运算符，详见之前 [展开语法(Spread syntax)](hhttp://okarin.cn/docs/deepJavaScript/11JS.html#%E5%B1%95%E5%BC%80%E8%AF%AD%E6%B3%95-spread-syntax)



## ES9 - Async iterators

后续迭代器详解

ES9 - Async iterators



## ES9 - Promise finally

后面Promise详解



## ES10 -flat flatMap

### flat的使用

`flat() ` 方法会按照一个可指定的深度递归遍历数组，并将所有元素与遍历到的子数组中的元素合并为一个新数组返回。

```js
const nums  = [10,20,[2,9],[[30,40]],50,[60,90]]
const newNums = nums.flat()
console.log(newNums)//[ 10, 20, 2, 9, [ 30, 40 ], 50, 60, 90 ]

const newNums2 = nums.flat(2)
console.log(newNums2)//[ 10, 20,  2,  9, 30, 40, 50, 60, 90]
```

### flatMap的使用

`flatMap()` 方法首先使用映射函数映射每个元素，然后将结果压缩成一个新数组。

::: warning 注意一：
* flatMap 是先进行 map 操作，再做 flat 的操作；
:::

::: warning 注意二：
* flatMap 中的 flat 相当于深度为1；
:::

```js
const message = ["hello world","my name is okarin"]

const mapMessage = message.map(res =>{
    return res.split(" ")
})

const flatMessage = message.flatMap(res =>{
    return res.split(" ")
})

console.log(mapMessage)//[ [ 'hello', 'world' ], [ 'my', 'name', 'is', 'okarin' ] ]
console.log(flatMessage)//[ 'hello', 'world', 'my', 'name', 'is', 'okarin' ]

```

## ES10 - Object fromEntries

`Object.fromEntries` 可以将Entries数组转换为对象
```js
const arr = [ [ 'name', 'okarin' ], [ 'age', 18 ] ]
obj = Object.fromEntries(arr)
console.log(obj)

//obj = { name:"okarin",age:18}

```

### fromEntries的应用场景

有这样一个数组：[{key:xxx},{value:xxx}]

`key` `value`是固定的属性

```js
[
    {key:'alan',value:12},
    {key:'mike',value:18}
]
```

期望值

```js
{alan:12,mike:18}
```

使用 `Object.fromEntries`

```js
const data = [
    { key: "alan", value: 12 },
    { key: "mike", value: 18 }
];

const result = Object.fromEntries(
    data.map(({ key, value }) => [key, value])
);

console.log(result);
```




