(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{532:function(t,e,a){"use strict";a.r(e);var s=a(5),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"v-for的key值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v-for的key值"}},[t._v("#")]),t._v(" v-for的key值")]),t._v(" "),a("p",[t._v("在v-for进行遍历时，通常会给元素和组件绑定一个"),a("code",[t._v("key")]),t._v("属性。")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-for")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("(item,index) in movies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":key")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{item}}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("官方解释：")]),t._v(" "),a("blockquote",[a("p",[t._v("key属性主要是用在Vue的"),a("strong",[t._v("虚拟DOM算法")]),t._v("，在新旧nodes对比时辨识"),a("strong",[t._v("VNodes")]),t._v("。\n如果不使用key，Vue会使用一种最大限度减少动态元素并且尽可能的尝试就地修改/复用相同类型元素的算法（diff算法）。\n而使用key时，它会基于key值的变化"),a("strong",[t._v("重新排列元素顺序")]),t._v(",并且会"),a("strong",[t._v("移除/销毁key")]),t._v("不存在的元素。")])]),t._v(" "),a("h2",{attrs:{id:"什么是vnode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是vnode"}},[t._v("#")]),t._v(" 什么是VNode？")]),t._v(" "),a("p",[t._v("VNode全称是Virtual Node,也就是虚拟节点。浏览器在渲染页面时，一个元素就是一个个真实DOM节点。无论是组件还是元素，在vue中表现出的就是一个个VNode。VNode的本质时=是一个js对象。template会先转换成VNode再转换成真实DOM。VNode的好处就是能跨平台。")]),t._v(" "),a("h2",{attrs:{id:"什么是虚拟dom"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是虚拟dom"}},[t._v("#")]),t._v(" 什么是虚拟DOM？")]),t._v(" "),a("p",[t._v("如果不是只有一个简单的div,而是有一大堆元素，那么他们会形成一个VNode Tree。一般把这个树结构成为虚拟DOM。")]),t._v(" "),a("h2",{attrs:{id:"vue中的-diff算法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue中的-diff算法"}},[t._v("#")]),t._v(" Vue中的 diff算法")]),t._v(" "),a("p",[t._v("初次渲染的时候，将VDOM渲染成真正的DOM然后插入到容器里面。\n再需要更新的时候，把旧的VNode和新的VNode进行对比，最后得出哪里需要更新。")]),t._v(" "),a("p",[t._v("Vue中的对于有key和无key的两种对比算法：")]),t._v(" "),a("h3",{attrs:{id:"patchkeyedchildren-方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#patchkeyedchildren-方法"}},[t._v("#")]),t._v(" patchKeyedChildren 方法")]),t._v(" "),a("p",[t._v("在有key的情况下：")]),t._v(" "),a("ol",[a("li",[t._v("从头部开始，在while循环中对每个节点进行类型和key的比较，如果不相同就跳出循环")]),t._v(" "),a("li",[t._v("从尾部开始再次进行第一步的操作")]),t._v(" "),a("li",[t._v("如果旧节点遍历完了，依然有新节点，那么就是添加，会找到新节点的位置，使用null和新节点进行比较（表示一次挂载 mount），把新节点进行挂载。")]),t._v(" "),a("li",[t._v("如果上一步操作中，还剩余旧节点，那么就是卸载，会将旧节点移除掉（unmount）。")]),t._v(" "),a("li",[t._v("如果中间是无序的，那么就会尽可能的在旧节点中找到新的节点，会尽可能的在旧节点中利用，然后有多余的节点就进行移除，有新增的就进行挂载。")])]),t._v(" "),a("h3",{attrs:{id:"patchunkeyedchildren-方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#patchunkeyedchildren-方法"}},[t._v("#")]),t._v(" patchUnkeyedChildren 方法")]),t._v(" "),a("p",[t._v("无key情况下,会对比新旧VNode节点的长度，使用最少的进行比较。从0的位置进行比较如果旧的节点数大于新的节点数。就移除剩余的节点。否则就创建新的节点，再把新的节点挂载到VNode列表之上。最后完成所有节点的重新创建。")])])}),[],!1,null,null,null);e.default=n.exports}}]);